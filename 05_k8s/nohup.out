Creating nodes...
node21.lab.local
? (10.1.16.200) at 52:54:00:1d:db:72 [ether] on virbr16
[WARNING]: Could not match supplied host pattern, ignoring: newhost

PLAY [localhost] ***************************************************************

TASK [Set global variables] ****************************************************
ok: [localhost]

TASK [Set ip] ******************************************************************
ok: [localhost]

TASK [Set FQDN] ****************************************************************
ok: [localhost]

TASK [Set REALM] ***************************************************************
ok: [localhost]

TASK [Set Kubernetes facts] ****************************************************
ok: [localhost]

TASK [Create ansible group for new hosts] **************************************
changed: [localhost]

TASK [Delete ssh keys for template] ********************************************
[WARNING]: Consider using the replace, lineinfile or template module rather
than running 'sed'.  If you need to use command because replace, lineinfile or
template is insufficient you can add 'warn: false' to this command task or set
'command_warnings=False' in ansible.cfg to get rid of this message.
changed: [localhost]

TASK [Delete ssh keys for ip] **************************************************
changed: [localhost]

TASK [Create ansible group for ipa server] *************************************
changed: [localhost]

TASK [Create data directory] ***************************************************
[WARNING]: Consider using the file module with state=directory rather than
running 'mkdir'.  If you need to use command because file is insufficient you
can add 'warn: false' to this command task or set 'command_warnings=False' in
ansible.cfg to get rid of this message.
changed: [localhost]

TASK [Clone template] **********************************************************
changed: [localhost]

TASK [Change rootvg size] ******************************************************
changed: [localhost]

TASK [Set max memory] **********************************************************
changed: [localhost]

TASK [Set more memory] *********************************************************
changed: [localhost]

TASK [Start machine] ***********************************************************
changed: [localhost]

PLAY [centos7] *****************************************************************

TASK [pause] *******************************************************************
Pausing for 35 seconds
(ctrl+C then 'C' = continue early, ctrl+C then 'A' = abort)
ok: [centos7]

TASK [Set global variables] ****************************************************
ok: [centos7]

TASK [Set ip] ******************************************************************
ok: [centos7]

TASK [Set FQDN] ****************************************************************
ok: [centos7]

TASK [Set REALM] ***************************************************************
ok: [centos7]

TASK [Set Kubernetes facts] ****************************************************
ok: [centos7]

TASK [Change hostname] *********************************************************
changed: [centos7]

TASK [Add hosts to hostname] ***************************************************
changed: [centos7]

TASK [Resize partition] ********************************************************
fatal: [centos7]: FAILED! => {"changed": true, "cmd": "printf 'd\\n2\\np\\nn\\np\\n2\\n\\n\\nt\\n2\\n8e\\nw' | fdisk /dev/vda", "delta": "0:00:00.019714", "end": "2021-02-26 11:49:50.330806", "msg": "non-zero return code", "rc": 1, "start": "2021-02-26 11:49:50.311092", "stderr": "", "stderr_lines": [], "stdout": "Welcome to fdisk (util-linux 2.23.2).\n\nChanges will remain in memory only, until you decide to write them.\nBe careful before using the write command.\n\n\nCommand (m for help): Partition number (1,2, default 2): Partition 2 is deleted\n\nCommand (m for help): \nDisk /dev/vda: 32.2 GB, 32212254720 bytes, 62914560 sectors\nUnits = sectors of 1 * 512 = 512 bytes\nSector size (logical/physical): 512 bytes / 512 bytes\nI/O size (minimum/optimal): 512 bytes / 512 bytes\nDisk label type: dos\nDisk identifier: 0x00013b86\n\n   Device Boot      Start         End      Blocks   Id  System\n/dev/vda1   *        2048     2099199     1048576   83  Linux\n\nCommand (m for help): Partition type:\n   p   primary (1 primary, 0 extended, 3 free)\n   e   extended\nSelect (default p): Partition number (2-4, default 2): First sector (2099200-62914559, default 2099200): Using default value 2099200\nLast sector, +sectors or +size{K,M,G} (2099200-62914559, default 62914559): Using default value 62914559\nPartition 2 of type Linux and of size 29 GiB is set\n\nCommand (m for help): Partition number (1,2, default 2): Hex code (type L to list all codes): Changed type of partition 'Linux' to 'Linux LVM'\n\nCommand (m for help): The partition table has been altered!\n\nCalling ioctl() to re-read partition table.\n\nWARNING: Re-reading the partition table failed with error 16: Device or resource busy.\nThe kernel still uses the old table. The new table will be used at\nthe next reboot or after you run partprobe(8) or kpartx(8)\nSyncing disks.", "stdout_lines": ["Welcome to fdisk (util-linux 2.23.2).", "", "Changes will remain in memory only, until you decide to write them.", "Be careful before using the write command.", "", "", "Command (m for help): Partition number (1,2, default 2): Partition 2 is deleted", "", "Command (m for help): ", "Disk /dev/vda: 32.2 GB, 32212254720 bytes, 62914560 sectors", "Units = sectors of 1 * 512 = 512 bytes", "Sector size (logical/physical): 512 bytes / 512 bytes", "I/O size (minimum/optimal): 512 bytes / 512 bytes", "Disk label type: dos", "Disk identifier: 0x00013b86", "", "   Device Boot      Start         End      Blocks   Id  System", "/dev/vda1   *        2048     2099199     1048576   83  Linux", "", "Command (m for help): Partition type:", "   p   primary (1 primary, 0 extended, 3 free)", "   e   extended", "Select (default p): Partition number (2-4, default 2): First sector (2099200-62914559, default 2099200): Using default value 2099200", "Last sector, +sectors or +size{K,M,G} (2099200-62914559, default 62914559): Using default value 62914559", "Partition 2 of type Linux and of size 29 GiB is set", "", "Command (m for help): Partition number (1,2, default 2): Hex code (type L to list all codes): Changed type of partition 'Linux' to 'Linux LVM'", "", "Command (m for help): The partition table has been altered!", "", "Calling ioctl() to re-read partition table.", "", "WARNING: Re-reading the partition table failed with error 16: Device or resource busy.", "The kernel still uses the old table. The new table will be used at", "the next reboot or after you run partprobe(8) or kpartx(8)", "Syncing disks."]}
...ignoring

TASK [Partprobe disks] *********************************************************
changed: [centos7]

TASK [PV resize] ***************************************************************
changed: [centos7]

TASK [Add an Ethernet connection with static IP configuration] *****************
changed: [centos7]

TASK [Install additional packages] *********************************************
[WARNING]: Consider using the yum module rather than running 'yum'.  If you
need to use command because yum is insufficient you can add 'warn: false' to
this command task or set 'command_warnings=False' in ansible.cfg to get rid of
this message.
changed: [centos7]

TASK [Enable make dir option for new users] ************************************
changed: [centos7]

TASK [Update sshd config - part 1] *********************************************
changed: [centos7]

TASK [Update sshd config - part 2] *********************************************
changed: [centos7]

TASK [Update ssh config - non strict host checking] ****************************
changed: [centos7]

TASK [Create nfshome dir] ******************************************************
changed: [centos7]

TASK [Set nfs home boolean] ****************************************************
changed: [centos7]

TASK [Prepare autofs master] ***************************************************
changed: [centos7]

TASK [Create auto.nfshome] *****************************************************
changed: [centos7]

TASK [Set timezone to Prague] **************************************************
changed: [centos7]

PLAY [localhost] ***************************************************************

TASK [Shutdown host] ***********************************************************
changed: [localhost]

TASK [pause] *******************************************************************
Pausing for 5 seconds
(ctrl+C then 'C' = continue early, ctrl+C then 'A' = abort)
ok: [localhost]

TASK [Destroy domain] **********************************************************
fatal: [localhost]: FAILED! => {"changed": true, "cmd": "virsh destroy node21.lab.local", "delta": "0:00:00.050621", "end": "2021-02-26 17:53:29.681599", "msg": "non-zero return code", "rc": 1, "start": "2021-02-26 17:53:29.630978", "stderr": "error: Failed to destroy domain node21.lab.local\nerror: Requested operation is not valid: domain is not running", "stderr_lines": ["error: Failed to destroy domain node21.lab.local", "error: Requested operation is not valid: domain is not running"], "stdout": "", "stdout_lines": []}
...ignoring

TASK [Change virbr interface] **************************************************
changed: [localhost]

TASK [Start domain] ************************************************************
changed: [localhost]

PLAY [newhost] *****************************************************************

TASK [pause] *******************************************************************
Pausing for 25 seconds
(ctrl+C then 'C' = continue early, ctrl+C then 'A' = abort)
ok: [10.1.16.21]

TASK [Set global variables] ****************************************************
ok: [10.1.16.21]

TASK [Set ip] ******************************************************************
ok: [10.1.16.21]

TASK [Set FQDN] ****************************************************************
ok: [10.1.16.21]

TASK [Set REALM] ***************************************************************
ok: [10.1.16.21]

TASK [Set Kubernetes facts] ****************************************************
ok: [10.1.16.21]

TASK [Join machine to IPA domain] **********************************************
changed: [10.1.16.21]

TASK [Get the krb5 ticket] *****************************************************
changed: [10.1.16.21]

TASK [Add nfs server to the ipa server] ****************************************
changed: [10.1.16.21]

TASK [Create nfs service for krb5 mount client] ********************************
changed: [10.1.16.21]

TASK [Enable and start nfs client] *********************************************
changed: [10.1.16.21]

TASK [Enable and start autofs] *************************************************
changed: [10.1.16.21]

PLAY RECAP *********************************************************************
10.1.16.21                 : ok=12   changed=6    unreachable=0    failed=0    skipped=0    rescued=0    ignored=0   
centos7                    : ok=22   changed=16   unreachable=0    failed=0    skipped=0    rescued=0    ignored=1   
localhost                  : ok=20   changed=14   unreachable=0    failed=0    skipped=0    rescued=0    ignored=1   

node22.lab.local
? (10.1.16.200) at 52:54:00:c2:f5:de [ether] on virbr16
[WARNING]: Could not match supplied host pattern, ignoring: newhost

PLAY [localhost] ***************************************************************

TASK [Set global variables] ****************************************************
ok: [localhost]

TASK [Set ip] ******************************************************************
ok: [localhost]

TASK [Set FQDN] ****************************************************************
ok: [localhost]

TASK [Set REALM] ***************************************************************
ok: [localhost]

TASK [Set Kubernetes facts] ****************************************************
ok: [localhost]

TASK [Create ansible group for new hosts] **************************************
changed: [localhost]

TASK [Delete ssh keys for template] ********************************************
[WARNING]: Consider using the replace, lineinfile or template module rather
than running 'sed'.  If you need to use command because replace, lineinfile or
template is insufficient you can add 'warn: false' to this command task or set
'command_warnings=False' in ansible.cfg to get rid of this message.
changed: [localhost]

TASK [Delete ssh keys for ip] **************************************************
changed: [localhost]

TASK [Create ansible group for ipa server] *************************************
changed: [localhost]

TASK [Create data directory] ***************************************************
[WARNING]: Consider using the file module with state=directory rather than
running 'mkdir'.  If you need to use command because file is insufficient you
can add 'warn: false' to this command task or set 'command_warnings=False' in
ansible.cfg to get rid of this message.
changed: [localhost]

TASK [Clone template] **********************************************************
changed: [localhost]

TASK [Change rootvg size] ******************************************************
changed: [localhost]

TASK [Set max memory] **********************************************************
changed: [localhost]

TASK [Set more memory] *********************************************************
changed: [localhost]

TASK [Start machine] ***********************************************************
changed: [localhost]

PLAY [centos7] *****************************************************************

TASK [pause] *******************************************************************
Pausing for 35 seconds
(ctrl+C then 'C' = continue early, ctrl+C then 'A' = abort)
ok: [centos7]

TASK [Set global variables] ****************************************************
ok: [centos7]

TASK [Set ip] ******************************************************************
ok: [centos7]

TASK [Set FQDN] ****************************************************************
ok: [centos7]

TASK [Set REALM] ***************************************************************
ok: [centos7]

TASK [Set Kubernetes facts] ****************************************************
ok: [centos7]

TASK [Change hostname] *********************************************************
changed: [centos7]

TASK [Add hosts to hostname] ***************************************************
changed: [centos7]

TASK [Resize partition] ********************************************************
fatal: [centos7]: FAILED! => {"changed": true, "cmd": "printf 'd\\n2\\np\\nn\\np\\n2\\n\\n\\nt\\n2\\n8e\\nw' | fdisk /dev/vda", "delta": "0:00:00.021941", "end": "2021-02-26 11:56:31.127686", "msg": "non-zero return code", "rc": 1, "start": "2021-02-26 11:56:31.105745", "stderr": "", "stderr_lines": [], "stdout": "Welcome to fdisk (util-linux 2.23.2).\n\nChanges will remain in memory only, until you decide to write them.\nBe careful before using the write command.\n\n\nCommand (m for help): Partition number (1,2, default 2): Partition 2 is deleted\n\nCommand (m for help): \nDisk /dev/vda: 32.2 GB, 32212254720 bytes, 62914560 sectors\nUnits = sectors of 1 * 512 = 512 bytes\nSector size (logical/physical): 512 bytes / 512 bytes\nI/O size (minimum/optimal): 512 bytes / 512 bytes\nDisk label type: dos\nDisk identifier: 0x00013b86\n\n   Device Boot      Start         End      Blocks   Id  System\n/dev/vda1   *        2048     2099199     1048576   83  Linux\n\nCommand (m for help): Partition type:\n   p   primary (1 primary, 0 extended, 3 free)\n   e   extended\nSelect (default p): Partition number (2-4, default 2): First sector (2099200-62914559, default 2099200): Using default value 2099200\nLast sector, +sectors or +size{K,M,G} (2099200-62914559, default 62914559): Using default value 62914559\nPartition 2 of type Linux and of size 29 GiB is set\n\nCommand (m for help): Partition number (1,2, default 2): Hex code (type L to list all codes): Changed type of partition 'Linux' to 'Linux LVM'\n\nCommand (m for help): The partition table has been altered!\n\nCalling ioctl() to re-read partition table.\n\nWARNING: Re-reading the partition table failed with error 16: Device or resource busy.\nThe kernel still uses the old table. The new table will be used at\nthe next reboot or after you run partprobe(8) or kpartx(8)\nSyncing disks.", "stdout_lines": ["Welcome to fdisk (util-linux 2.23.2).", "", "Changes will remain in memory only, until you decide to write them.", "Be careful before using the write command.", "", "", "Command (m for help): Partition number (1,2, default 2): Partition 2 is deleted", "", "Command (m for help): ", "Disk /dev/vda: 32.2 GB, 32212254720 bytes, 62914560 sectors", "Units = sectors of 1 * 512 = 512 bytes", "Sector size (logical/physical): 512 bytes / 512 bytes", "I/O size (minimum/optimal): 512 bytes / 512 bytes", "Disk label type: dos", "Disk identifier: 0x00013b86", "", "   Device Boot      Start         End      Blocks   Id  System", "/dev/vda1   *        2048     2099199     1048576   83  Linux", "", "Command (m for help): Partition type:", "   p   primary (1 primary, 0 extended, 3 free)", "   e   extended", "Select (default p): Partition number (2-4, default 2): First sector (2099200-62914559, default 2099200): Using default value 2099200", "Last sector, +sectors or +size{K,M,G} (2099200-62914559, default 62914559): Using default value 62914559", "Partition 2 of type Linux and of size 29 GiB is set", "", "Command (m for help): Partition number (1,2, default 2): Hex code (type L to list all codes): Changed type of partition 'Linux' to 'Linux LVM'", "", "Command (m for help): The partition table has been altered!", "", "Calling ioctl() to re-read partition table.", "", "WARNING: Re-reading the partition table failed with error 16: Device or resource busy.", "The kernel still uses the old table. The new table will be used at", "the next reboot or after you run partprobe(8) or kpartx(8)", "Syncing disks."]}
...ignoring

TASK [Partprobe disks] *********************************************************
changed: [centos7]

TASK [PV resize] ***************************************************************
changed: [centos7]

TASK [Add an Ethernet connection with static IP configuration] *****************
changed: [centos7]

TASK [Install additional packages] *********************************************
[WARNING]: Consider using the yum module rather than running 'yum'.  If you
need to use command because yum is insufficient you can add 'warn: false' to
this command task or set 'command_warnings=False' in ansible.cfg to get rid of
this message.
changed: [centos7]

TASK [Enable make dir option for new users] ************************************
changed: [centos7]

TASK [Update sshd config - part 1] *********************************************
changed: [centos7]

TASK [Update sshd config - part 2] *********************************************
changed: [centos7]

TASK [Update ssh config - non strict host checking] ****************************
changed: [centos7]

TASK [Create nfshome dir] ******************************************************
changed: [centos7]

TASK [Set nfs home boolean] ****************************************************
changed: [centos7]

TASK [Prepare autofs master] ***************************************************
changed: [centos7]

TASK [Create auto.nfshome] *****************************************************
changed: [centos7]

TASK [Set timezone to Prague] **************************************************
changed: [centos7]

PLAY [localhost] ***************************************************************

TASK [Shutdown host] ***********************************************************
changed: [localhost]

TASK [pause] *******************************************************************
Pausing for 5 seconds
(ctrl+C then 'C' = continue early, ctrl+C then 'A' = abort)
ok: [localhost]

TASK [Destroy domain] **********************************************************
fatal: [localhost]: FAILED! => {"changed": true, "cmd": "virsh destroy node22.lab.local", "delta": "0:00:00.048335", "end": "2021-02-26 17:58:57.227828", "msg": "non-zero return code", "rc": 1, "start": "2021-02-26 17:58:57.179493", "stderr": "error: Failed to destroy domain node22.lab.local\nerror: Requested operation is not valid: domain is not running", "stderr_lines": ["error: Failed to destroy domain node22.lab.local", "error: Requested operation is not valid: domain is not running"], "stdout": "", "stdout_lines": []}
...ignoring

TASK [Change virbr interface] **************************************************
changed: [localhost]

TASK [Start domain] ************************************************************
changed: [localhost]

PLAY [newhost] *****************************************************************

TASK [pause] *******************************************************************
Pausing for 25 seconds
(ctrl+C then 'C' = continue early, ctrl+C then 'A' = abort)
ok: [10.1.16.22]

TASK [Set global variables] ****************************************************
ok: [10.1.16.22]

TASK [Set ip] ******************************************************************
ok: [10.1.16.22]

TASK [Set FQDN] ****************************************************************
ok: [10.1.16.22]

TASK [Set REALM] ***************************************************************
ok: [10.1.16.22]

TASK [Set Kubernetes facts] ****************************************************
ok: [10.1.16.22]

TASK [Join machine to IPA domain] **********************************************
changed: [10.1.16.22]

TASK [Get the krb5 ticket] *****************************************************
changed: [10.1.16.22]

TASK [Add nfs server to the ipa server] ****************************************
changed: [10.1.16.22]

TASK [Create nfs service for krb5 mount client] ********************************
changed: [10.1.16.22]

TASK [Enable and start nfs client] *********************************************
changed: [10.1.16.22]

TASK [Enable and start autofs] *************************************************
changed: [10.1.16.22]

PLAY RECAP *********************************************************************
10.1.16.22                 : ok=12   changed=6    unreachable=0    failed=0    skipped=0    rescued=0    ignored=0   
centos7                    : ok=22   changed=16   unreachable=0    failed=0    skipped=0    rescued=0    ignored=1   
localhost                  : ok=20   changed=14   unreachable=0    failed=0    skipped=0    rescued=0    ignored=1   

node23.lab.local
? (10.1.16.200) at 52:54:00:4c:e7:c8 [ether] on virbr16
[WARNING]: Could not match supplied host pattern, ignoring: newhost

PLAY [localhost] ***************************************************************

TASK [Set global variables] ****************************************************
ok: [localhost]

TASK [Set ip] ******************************************************************
ok: [localhost]

TASK [Set FQDN] ****************************************************************
ok: [localhost]

TASK [Set REALM] ***************************************************************
ok: [localhost]

TASK [Set Kubernetes facts] ****************************************************
ok: [localhost]

TASK [Create ansible group for new hosts] **************************************
changed: [localhost]

TASK [Delete ssh keys for template] ********************************************
[WARNING]: Consider using the replace, lineinfile or template module rather
than running 'sed'.  If you need to use command because replace, lineinfile or
template is insufficient you can add 'warn: false' to this command task or set
'command_warnings=False' in ansible.cfg to get rid of this message.
changed: [localhost]

TASK [Delete ssh keys for ip] **************************************************
changed: [localhost]

TASK [Create ansible group for ipa server] *************************************
changed: [localhost]

TASK [Create data directory] ***************************************************
[WARNING]: Consider using the file module with state=directory rather than
running 'mkdir'.  If you need to use command because file is insufficient you
can add 'warn: false' to this command task or set 'command_warnings=False' in
ansible.cfg to get rid of this message.
changed: [localhost]

TASK [Clone template] **********************************************************
changed: [localhost]

TASK [Change rootvg size] ******************************************************
changed: [localhost]

TASK [Set max memory] **********************************************************
changed: [localhost]

TASK [Set more memory] *********************************************************
changed: [localhost]

TASK [Start machine] ***********************************************************
changed: [localhost]

PLAY [centos7] *****************************************************************

TASK [pause] *******************************************************************
Pausing for 35 seconds
(ctrl+C then 'C' = continue early, ctrl+C then 'A' = abort)
ok: [centos7]

TASK [Set global variables] ****************************************************
ok: [centos7]

TASK [Set ip] ******************************************************************
ok: [centos7]

TASK [Set FQDN] ****************************************************************
ok: [centos7]

TASK [Set REALM] ***************************************************************
ok: [centos7]

TASK [Set Kubernetes facts] ****************************************************
ok: [centos7]

TASK [Change hostname] *********************************************************
changed: [centos7]

TASK [Add hosts to hostname] ***************************************************
changed: [centos7]

TASK [Resize partition] ********************************************************
fatal: [centos7]: FAILED! => {"changed": true, "cmd": "printf 'd\\n2\\np\\nn\\np\\n2\\n\\n\\nt\\n2\\n8e\\nw' | fdisk /dev/vda", "delta": "0:00:00.022311", "end": "2021-02-26 12:01:59.615594", "msg": "non-zero return code", "rc": 1, "start": "2021-02-26 12:01:59.593283", "stderr": "", "stderr_lines": [], "stdout": "Welcome to fdisk (util-linux 2.23.2).\n\nChanges will remain in memory only, until you decide to write them.\nBe careful before using the write command.\n\n\nCommand (m for help): Partition number (1,2, default 2): Partition 2 is deleted\n\nCommand (m for help): \nDisk /dev/vda: 32.2 GB, 32212254720 bytes, 62914560 sectors\nUnits = sectors of 1 * 512 = 512 bytes\nSector size (logical/physical): 512 bytes / 512 bytes\nI/O size (minimum/optimal): 512 bytes / 512 bytes\nDisk label type: dos\nDisk identifier: 0x00013b86\n\n   Device Boot      Start         End      Blocks   Id  System\n/dev/vda1   *        2048     2099199     1048576   83  Linux\n\nCommand (m for help): Partition type:\n   p   primary (1 primary, 0 extended, 3 free)\n   e   extended\nSelect (default p): Partition number (2-4, default 2): First sector (2099200-62914559, default 2099200): Using default value 2099200\nLast sector, +sectors or +size{K,M,G} (2099200-62914559, default 62914559): Using default value 62914559\nPartition 2 of type Linux and of size 29 GiB is set\n\nCommand (m for help): Partition number (1,2, default 2): Hex code (type L to list all codes): Changed type of partition 'Linux' to 'Linux LVM'\n\nCommand (m for help): The partition table has been altered!\n\nCalling ioctl() to re-read partition table.\n\nWARNING: Re-reading the partition table failed with error 16: Device or resource busy.\nThe kernel still uses the old table. The new table will be used at\nthe next reboot or after you run partprobe(8) or kpartx(8)\nSyncing disks.", "stdout_lines": ["Welcome to fdisk (util-linux 2.23.2).", "", "Changes will remain in memory only, until you decide to write them.", "Be careful before using the write command.", "", "", "Command (m for help): Partition number (1,2, default 2): Partition 2 is deleted", "", "Command (m for help): ", "Disk /dev/vda: 32.2 GB, 32212254720 bytes, 62914560 sectors", "Units = sectors of 1 * 512 = 512 bytes", "Sector size (logical/physical): 512 bytes / 512 bytes", "I/O size (minimum/optimal): 512 bytes / 512 bytes", "Disk label type: dos", "Disk identifier: 0x00013b86", "", "   Device Boot      Start         End      Blocks   Id  System", "/dev/vda1   *        2048     2099199     1048576   83  Linux", "", "Command (m for help): Partition type:", "   p   primary (1 primary, 0 extended, 3 free)", "   e   extended", "Select (default p): Partition number (2-4, default 2): First sector (2099200-62914559, default 2099200): Using default value 2099200", "Last sector, +sectors or +size{K,M,G} (2099200-62914559, default 62914559): Using default value 62914559", "Partition 2 of type Linux and of size 29 GiB is set", "", "Command (m for help): Partition number (1,2, default 2): Hex code (type L to list all codes): Changed type of partition 'Linux' to 'Linux LVM'", "", "Command (m for help): The partition table has been altered!", "", "Calling ioctl() to re-read partition table.", "", "WARNING: Re-reading the partition table failed with error 16: Device or resource busy.", "The kernel still uses the old table. The new table will be used at", "the next reboot or after you run partprobe(8) or kpartx(8)", "Syncing disks."]}
...ignoring

TASK [Partprobe disks] *********************************************************
changed: [centos7]

TASK [PV resize] ***************************************************************
changed: [centos7]

TASK [Add an Ethernet connection with static IP configuration] *****************
changed: [centos7]

TASK [Install additional packages] *********************************************
[WARNING]: Consider using the yum module rather than running 'yum'.  If you
need to use command because yum is insufficient you can add 'warn: false' to
this command task or set 'command_warnings=False' in ansible.cfg to get rid of
this message.
changed: [centos7]

TASK [Enable make dir option for new users] ************************************
changed: [centos7]

TASK [Update sshd config - part 1] *********************************************
changed: [centos7]

TASK [Update sshd config - part 2] *********************************************
changed: [centos7]

TASK [Update ssh config - non strict host checking] ****************************
changed: [centos7]

TASK [Create nfshome dir] ******************************************************
changed: [centos7]

TASK [Set nfs home boolean] ****************************************************
changed: [centos7]

TASK [Prepare autofs master] ***************************************************
changed: [centos7]

TASK [Create auto.nfshome] *****************************************************
changed: [centos7]

TASK [Set timezone to Prague] **************************************************
changed: [centos7]

PLAY [localhost] ***************************************************************

TASK [Shutdown host] ***********************************************************
changed: [localhost]

TASK [pause] *******************************************************************
Pausing for 5 seconds
(ctrl+C then 'C' = continue early, ctrl+C then 'A' = abort)
ok: [localhost]

TASK [Destroy domain] **********************************************************
changed: [localhost]

TASK [Change virbr interface] **************************************************
changed: [localhost]

TASK [Start domain] ************************************************************
changed: [localhost]

PLAY [newhost] *****************************************************************

TASK [pause] *******************************************************************
Pausing for 25 seconds
(ctrl+C then 'C' = continue early, ctrl+C then 'A' = abort)
ok: [10.1.16.23]

TASK [Set global variables] ****************************************************
ok: [10.1.16.23]

TASK [Set ip] ******************************************************************
ok: [10.1.16.23]

TASK [Set FQDN] ****************************************************************
ok: [10.1.16.23]

TASK [Set REALM] ***************************************************************
ok: [10.1.16.23]

TASK [Set Kubernetes facts] ****************************************************
ok: [10.1.16.23]

TASK [Join machine to IPA domain] **********************************************
changed: [10.1.16.23]

TASK [Get the krb5 ticket] *****************************************************
changed: [10.1.16.23]

TASK [Add nfs server to the ipa server] ****************************************
changed: [10.1.16.23]

TASK [Create nfs service for krb5 mount client] ********************************
changed: [10.1.16.23]

TASK [Enable and start nfs client] *********************************************
changed: [10.1.16.23]

TASK [Enable and start autofs] *************************************************
changed: [10.1.16.23]

PLAY RECAP *********************************************************************
10.1.16.23                 : ok=12   changed=6    unreachable=0    failed=0    skipped=0    rescued=0    ignored=0   
centos7                    : ok=22   changed=16   unreachable=0    failed=0    skipped=0    rescued=0    ignored=1   
localhost                  : ok=20   changed=14   unreachable=0    failed=0    skipped=0    rescued=0    ignored=0   

node24.lab.local
? (10.1.16.200) at 52:54:00:ce:a1:1c [ether] on virbr16
[WARNING]: Could not match supplied host pattern, ignoring: newhost

PLAY [localhost] ***************************************************************

TASK [Set global variables] ****************************************************
ok: [localhost]

TASK [Set ip] ******************************************************************
ok: [localhost]

TASK [Set FQDN] ****************************************************************
ok: [localhost]

TASK [Set REALM] ***************************************************************
ok: [localhost]

TASK [Set Kubernetes facts] ****************************************************
ok: [localhost]

TASK [Create ansible group for new hosts] **************************************
changed: [localhost]

TASK [Delete ssh keys for template] ********************************************
[WARNING]: Consider using the replace, lineinfile or template module rather
than running 'sed'.  If you need to use command because replace, lineinfile or
template is insufficient you can add 'warn: false' to this command task or set
'command_warnings=False' in ansible.cfg to get rid of this message.
changed: [localhost]

TASK [Delete ssh keys for ip] **************************************************
changed: [localhost]

TASK [Create ansible group for ipa server] *************************************
changed: [localhost]

TASK [Create data directory] ***************************************************
[WARNING]: Consider using the file module with state=directory rather than
running 'mkdir'.  If you need to use command because file is insufficient you
can add 'warn: false' to this command task or set 'command_warnings=False' in
ansible.cfg to get rid of this message.
changed: [localhost]

TASK [Clone template] **********************************************************
changed: [localhost]

TASK [Change rootvg size] ******************************************************
changed: [localhost]

TASK [Set max memory] **********************************************************
changed: [localhost]

TASK [Set more memory] *********************************************************
changed: [localhost]

TASK [Start machine] ***********************************************************
changed: [localhost]

PLAY [centos7] *****************************************************************

TASK [pause] *******************************************************************
Pausing for 35 seconds
(ctrl+C then 'C' = continue early, ctrl+C then 'A' = abort)
ok: [centos7]

TASK [Set global variables] ****************************************************
ok: [centos7]

TASK [Set ip] ******************************************************************
ok: [centos7]

TASK [Set FQDN] ****************************************************************
ok: [centos7]

TASK [Set REALM] ***************************************************************
ok: [centos7]

TASK [Set Kubernetes facts] ****************************************************
ok: [centos7]

TASK [Change hostname] *********************************************************
changed: [centos7]

TASK [Add hosts to hostname] ***************************************************
changed: [centos7]

TASK [Resize partition] ********************************************************
fatal: [centos7]: FAILED! => {"changed": true, "cmd": "printf 'd\\n2\\np\\nn\\np\\n2\\n\\n\\nt\\n2\\n8e\\nw' | fdisk /dev/vda", "delta": "0:00:00.024835", "end": "2021-02-26 12:07:53.819043", "msg": "non-zero return code", "rc": 1, "start": "2021-02-26 12:07:53.794208", "stderr": "", "stderr_lines": [], "stdout": "Welcome to fdisk (util-linux 2.23.2).\n\nChanges will remain in memory only, until you decide to write them.\nBe careful before using the write command.\n\n\nCommand (m for help): Partition number (1,2, default 2): Partition 2 is deleted\n\nCommand (m for help): \nDisk /dev/vda: 32.2 GB, 32212254720 bytes, 62914560 sectors\nUnits = sectors of 1 * 512 = 512 bytes\nSector size (logical/physical): 512 bytes / 512 bytes\nI/O size (minimum/optimal): 512 bytes / 512 bytes\nDisk label type: dos\nDisk identifier: 0x00013b86\n\n   Device Boot      Start         End      Blocks   Id  System\n/dev/vda1   *        2048     2099199     1048576   83  Linux\n\nCommand (m for help): Partition type:\n   p   primary (1 primary, 0 extended, 3 free)\n   e   extended\nSelect (default p): Partition number (2-4, default 2): First sector (2099200-62914559, default 2099200): Using default value 2099200\nLast sector, +sectors or +size{K,M,G} (2099200-62914559, default 62914559): Using default value 62914559\nPartition 2 of type Linux and of size 29 GiB is set\n\nCommand (m for help): Partition number (1,2, default 2): Hex code (type L to list all codes): Changed type of partition 'Linux' to 'Linux LVM'\n\nCommand (m for help): The partition table has been altered!\n\nCalling ioctl() to re-read partition table.\n\nWARNING: Re-reading the partition table failed with error 16: Device or resource busy.\nThe kernel still uses the old table. The new table will be used at\nthe next reboot or after you run partprobe(8) or kpartx(8)\nSyncing disks.", "stdout_lines": ["Welcome to fdisk (util-linux 2.23.2).", "", "Changes will remain in memory only, until you decide to write them.", "Be careful before using the write command.", "", "", "Command (m for help): Partition number (1,2, default 2): Partition 2 is deleted", "", "Command (m for help): ", "Disk /dev/vda: 32.2 GB, 32212254720 bytes, 62914560 sectors", "Units = sectors of 1 * 512 = 512 bytes", "Sector size (logical/physical): 512 bytes / 512 bytes", "I/O size (minimum/optimal): 512 bytes / 512 bytes", "Disk label type: dos", "Disk identifier: 0x00013b86", "", "   Device Boot      Start         End      Blocks   Id  System", "/dev/vda1   *        2048     2099199     1048576   83  Linux", "", "Command (m for help): Partition type:", "   p   primary (1 primary, 0 extended, 3 free)", "   e   extended", "Select (default p): Partition number (2-4, default 2): First sector (2099200-62914559, default 2099200): Using default value 2099200", "Last sector, +sectors or +size{K,M,G} (2099200-62914559, default 62914559): Using default value 62914559", "Partition 2 of type Linux and of size 29 GiB is set", "", "Command (m for help): Partition number (1,2, default 2): Hex code (type L to list all codes): Changed type of partition 'Linux' to 'Linux LVM'", "", "Command (m for help): The partition table has been altered!", "", "Calling ioctl() to re-read partition table.", "", "WARNING: Re-reading the partition table failed with error 16: Device or resource busy.", "The kernel still uses the old table. The new table will be used at", "the next reboot or after you run partprobe(8) or kpartx(8)", "Syncing disks."]}
...ignoring

TASK [Partprobe disks] *********************************************************
changed: [centos7]

TASK [PV resize] ***************************************************************
changed: [centos7]

TASK [Add an Ethernet connection with static IP configuration] *****************
changed: [centos7]

TASK [Install additional packages] *********************************************
[WARNING]: Consider using the yum module rather than running 'yum'.  If you
need to use command because yum is insufficient you can add 'warn: false' to
this command task or set 'command_warnings=False' in ansible.cfg to get rid of
this message.
changed: [centos7]

TASK [Enable make dir option for new users] ************************************
changed: [centos7]

TASK [Update sshd config - part 1] *********************************************
changed: [centos7]

TASK [Update sshd config - part 2] *********************************************
changed: [centos7]

TASK [Update ssh config - non strict host checking] ****************************
changed: [centos7]

TASK [Create nfshome dir] ******************************************************
changed: [centos7]

TASK [Set nfs home boolean] ****************************************************
changed: [centos7]

TASK [Prepare autofs master] ***************************************************
changed: [centos7]

TASK [Create auto.nfshome] *****************************************************
changed: [centos7]

TASK [Set timezone to Prague] **************************************************
changed: [centos7]

PLAY [localhost] ***************************************************************

TASK [Shutdown host] ***********************************************************
changed: [localhost]

TASK [pause] *******************************************************************
Pausing for 5 seconds
(ctrl+C then 'C' = continue early, ctrl+C then 'A' = abort)
ok: [localhost]

TASK [Destroy domain] **********************************************************
fatal: [localhost]: FAILED! => {"changed": true, "cmd": "virsh destroy node24.lab.local", "delta": "0:00:00.048485", "end": "2021-02-26 18:10:19.035705", "msg": "non-zero return code", "rc": 1, "start": "2021-02-26 18:10:18.987220", "stderr": "error: Failed to destroy domain node24.lab.local\nerror: Requested operation is not valid: domain is not running", "stderr_lines": ["error: Failed to destroy domain node24.lab.local", "error: Requested operation is not valid: domain is not running"], "stdout": "", "stdout_lines": []}
...ignoring

TASK [Change virbr interface] **************************************************
changed: [localhost]

TASK [Start domain] ************************************************************
changed: [localhost]

PLAY [newhost] *****************************************************************

TASK [pause] *******************************************************************
Pausing for 25 seconds
(ctrl+C then 'C' = continue early, ctrl+C then 'A' = abort)
ok: [10.1.16.24]

TASK [Set global variables] ****************************************************
ok: [10.1.16.24]

TASK [Set ip] ******************************************************************
ok: [10.1.16.24]

TASK [Set FQDN] ****************************************************************
ok: [10.1.16.24]

TASK [Set REALM] ***************************************************************
ok: [10.1.16.24]

TASK [Set Kubernetes facts] ****************************************************
ok: [10.1.16.24]

TASK [Join machine to IPA domain] **********************************************
changed: [10.1.16.24]

TASK [Get the krb5 ticket] *****************************************************
changed: [10.1.16.24]

TASK [Add nfs server to the ipa server] ****************************************
changed: [10.1.16.24]

TASK [Create nfs service for krb5 mount client] ********************************
changed: [10.1.16.24]

TASK [Enable and start nfs client] *********************************************
changed: [10.1.16.24]

TASK [Enable and start autofs] *************************************************
changed: [10.1.16.24]

PLAY RECAP *********************************************************************
10.1.16.24                 : ok=12   changed=6    unreachable=0    failed=0    skipped=0    rescued=0    ignored=0   
centos7                    : ok=22   changed=16   unreachable=0    failed=0    skipped=0    rescued=0    ignored=1   
localhost                  : ok=20   changed=14   unreachable=0    failed=0    skipped=0    rescued=0    ignored=1   

node25.lab.local
? (10.1.16.200) at 52:54:00:60:9d:7d [ether] on virbr16
[WARNING]: Could not match supplied host pattern, ignoring: newhost

PLAY [localhost] ***************************************************************

TASK [Set global variables] ****************************************************
ok: [localhost]

TASK [Set ip] ******************************************************************
ok: [localhost]

TASK [Set FQDN] ****************************************************************
ok: [localhost]

TASK [Set REALM] ***************************************************************
ok: [localhost]

TASK [Set Kubernetes facts] ****************************************************
ok: [localhost]

TASK [Create ansible group for new hosts] **************************************
changed: [localhost]

TASK [Delete ssh keys for template] ********************************************
[WARNING]: Consider using the replace, lineinfile or template module rather
than running 'sed'.  If you need to use command because replace, lineinfile or
template is insufficient you can add 'warn: false' to this command task or set
'command_warnings=False' in ansible.cfg to get rid of this message.
changed: [localhost]

TASK [Delete ssh keys for ip] **************************************************
changed: [localhost]

TASK [Create ansible group for ipa server] *************************************
changed: [localhost]

TASK [Create data directory] ***************************************************
[WARNING]: Consider using the file module with state=directory rather than
running 'mkdir'.  If you need to use command because file is insufficient you
can add 'warn: false' to this command task or set 'command_warnings=False' in
ansible.cfg to get rid of this message.
changed: [localhost]

TASK [Clone template] **********************************************************
changed: [localhost]

TASK [Change rootvg size] ******************************************************
changed: [localhost]

TASK [Set max memory] **********************************************************
changed: [localhost]

TASK [Set more memory] *********************************************************
changed: [localhost]

TASK [Start machine] ***********************************************************
changed: [localhost]

PLAY [centos7] *****************************************************************

TASK [pause] *******************************************************************
Pausing for 35 seconds
(ctrl+C then 'C' = continue early, ctrl+C then 'A' = abort)
ok: [centos7]

TASK [Set global variables] ****************************************************
ok: [centos7]

TASK [Set ip] ******************************************************************
ok: [centos7]

TASK [Set FQDN] ****************************************************************
ok: [centos7]

TASK [Set REALM] ***************************************************************
ok: [centos7]

TASK [Set Kubernetes facts] ****************************************************
ok: [centos7]

TASK [Change hostname] *********************************************************
changed: [centos7]

TASK [Add hosts to hostname] ***************************************************
changed: [centos7]

TASK [Resize partition] ********************************************************
fatal: [centos7]: FAILED! => {"changed": true, "cmd": "printf 'd\\n2\\np\\nn\\np\\n2\\n\\n\\nt\\n2\\n8e\\nw' | fdisk /dev/vda", "delta": "0:00:00.032234", "end": "2021-02-26 12:13:25.873140", "msg": "non-zero return code", "rc": 1, "start": "2021-02-26 12:13:25.840906", "stderr": "", "stderr_lines": [], "stdout": "Welcome to fdisk (util-linux 2.23.2).\n\nChanges will remain in memory only, until you decide to write them.\nBe careful before using the write command.\n\n\nCommand (m for help): Partition number (1,2, default 2): Partition 2 is deleted\n\nCommand (m for help): \nDisk /dev/vda: 32.2 GB, 32212254720 bytes, 62914560 sectors\nUnits = sectors of 1 * 512 = 512 bytes\nSector size (logical/physical): 512 bytes / 512 bytes\nI/O size (minimum/optimal): 512 bytes / 512 bytes\nDisk label type: dos\nDisk identifier: 0x00013b86\n\n   Device Boot      Start         End      Blocks   Id  System\n/dev/vda1   *        2048     2099199     1048576   83  Linux\n\nCommand (m for help): Partition type:\n   p   primary (1 primary, 0 extended, 3 free)\n   e   extended\nSelect (default p): Partition number (2-4, default 2): First sector (2099200-62914559, default 2099200): Using default value 2099200\nLast sector, +sectors or +size{K,M,G} (2099200-62914559, default 62914559): Using default value 62914559\nPartition 2 of type Linux and of size 29 GiB is set\n\nCommand (m for help): Partition number (1,2, default 2): Hex code (type L to list all codes): Changed type of partition 'Linux' to 'Linux LVM'\n\nCommand (m for help): The partition table has been altered!\n\nCalling ioctl() to re-read partition table.\n\nWARNING: Re-reading the partition table failed with error 16: Device or resource busy.\nThe kernel still uses the old table. The new table will be used at\nthe next reboot or after you run partprobe(8) or kpartx(8)\nSyncing disks.", "stdout_lines": ["Welcome to fdisk (util-linux 2.23.2).", "", "Changes will remain in memory only, until you decide to write them.", "Be careful before using the write command.", "", "", "Command (m for help): Partition number (1,2, default 2): Partition 2 is deleted", "", "Command (m for help): ", "Disk /dev/vda: 32.2 GB, 32212254720 bytes, 62914560 sectors", "Units = sectors of 1 * 512 = 512 bytes", "Sector size (logical/physical): 512 bytes / 512 bytes", "I/O size (minimum/optimal): 512 bytes / 512 bytes", "Disk label type: dos", "Disk identifier: 0x00013b86", "", "   Device Boot      Start         End      Blocks   Id  System", "/dev/vda1   *        2048     2099199     1048576   83  Linux", "", "Command (m for help): Partition type:", "   p   primary (1 primary, 0 extended, 3 free)", "   e   extended", "Select (default p): Partition number (2-4, default 2): First sector (2099200-62914559, default 2099200): Using default value 2099200", "Last sector, +sectors or +size{K,M,G} (2099200-62914559, default 62914559): Using default value 62914559", "Partition 2 of type Linux and of size 29 GiB is set", "", "Command (m for help): Partition number (1,2, default 2): Hex code (type L to list all codes): Changed type of partition 'Linux' to 'Linux LVM'", "", "Command (m for help): The partition table has been altered!", "", "Calling ioctl() to re-read partition table.", "", "WARNING: Re-reading the partition table failed with error 16: Device or resource busy.", "The kernel still uses the old table. The new table will be used at", "the next reboot or after you run partprobe(8) or kpartx(8)", "Syncing disks."]}
...ignoring

TASK [Partprobe disks] *********************************************************
changed: [centos7]

TASK [PV resize] ***************************************************************
changed: [centos7]

TASK [Add an Ethernet connection with static IP configuration] *****************
changed: [centos7]

TASK [Install additional packages] *********************************************
[WARNING]: Consider using the yum module rather than running 'yum'.  If you
need to use command because yum is insufficient you can add 'warn: false' to
this command task or set 'command_warnings=False' in ansible.cfg to get rid of
this message.
changed: [centos7]

TASK [Enable make dir option for new users] ************************************
changed: [centos7]

TASK [Update sshd config - part 1] *********************************************
changed: [centos7]

TASK [Update sshd config - part 2] *********************************************
changed: [centos7]

TASK [Update ssh config - non strict host checking] ****************************
changed: [centos7]

TASK [Create nfshome dir] ******************************************************
changed: [centos7]

TASK [Set nfs home boolean] ****************************************************
changed: [centos7]

TASK [Prepare autofs master] ***************************************************
changed: [centos7]

TASK [Create auto.nfshome] *****************************************************
changed: [centos7]

TASK [Set timezone to Prague] **************************************************
changed: [centos7]

PLAY [localhost] ***************************************************************

TASK [Shutdown host] ***********************************************************
changed: [localhost]

TASK [pause] *******************************************************************
Pausing for 5 seconds
(ctrl+C then 'C' = continue early, ctrl+C then 'A' = abort)
ok: [localhost]

TASK [Destroy domain] **********************************************************
fatal: [localhost]: FAILED! => {"changed": true, "cmd": "virsh destroy node25.lab.local", "delta": "0:00:00.062108", "end": "2021-02-26 18:15:46.057230", "msg": "non-zero return code", "rc": 1, "start": "2021-02-26 18:15:45.995122", "stderr": "error: Failed to destroy domain node25.lab.local\nerror: Requested operation is not valid: domain is not running", "stderr_lines": ["error: Failed to destroy domain node25.lab.local", "error: Requested operation is not valid: domain is not running"], "stdout": "", "stdout_lines": []}
...ignoring

TASK [Change virbr interface] **************************************************
changed: [localhost]

TASK [Start domain] ************************************************************
changed: [localhost]

PLAY [newhost] *****************************************************************

TASK [pause] *******************************************************************
Pausing for 25 seconds
(ctrl+C then 'C' = continue early, ctrl+C then 'A' = abort)
ok: [10.1.16.25]

TASK [Set global variables] ****************************************************
ok: [10.1.16.25]

TASK [Set ip] ******************************************************************
ok: [10.1.16.25]

TASK [Set FQDN] ****************************************************************
ok: [10.1.16.25]

TASK [Set REALM] ***************************************************************
ok: [10.1.16.25]

TASK [Set Kubernetes facts] ****************************************************
ok: [10.1.16.25]

TASK [Join machine to IPA domain] **********************************************
changed: [10.1.16.25]

TASK [Get the krb5 ticket] *****************************************************
changed: [10.1.16.25]

TASK [Add nfs server to the ipa server] ****************************************
changed: [10.1.16.25]

TASK [Create nfs service for krb5 mount client] ********************************
changed: [10.1.16.25]

TASK [Enable and start nfs client] *********************************************
changed: [10.1.16.25]

TASK [Enable and start autofs] *************************************************
changed: [10.1.16.25]

PLAY RECAP *********************************************************************
10.1.16.25                 : ok=12   changed=6    unreachable=0    failed=0    skipped=0    rescued=0    ignored=0   
centos7                    : ok=22   changed=16   unreachable=0    failed=0    skipped=0    rescued=0    ignored=1   
localhost                  : ok=20   changed=14   unreachable=0    failed=0    skipped=0    rescued=0    ignored=1   

node26.lab.local
? (10.1.16.200) at 52:54:00:63:b0:32 [ether] on virbr16
[WARNING]: Could not match supplied host pattern, ignoring: newhost

PLAY [localhost] ***************************************************************

TASK [Set global variables] ****************************************************
ok: [localhost]

TASK [Set ip] ******************************************************************
ok: [localhost]

TASK [Set FQDN] ****************************************************************
ok: [localhost]

TASK [Set REALM] ***************************************************************
ok: [localhost]

TASK [Set Kubernetes facts] ****************************************************
ok: [localhost]

TASK [Create ansible group for new hosts] **************************************
changed: [localhost]

TASK [Delete ssh keys for template] ********************************************
[WARNING]: Consider using the replace, lineinfile or template module rather
than running 'sed'.  If you need to use command because replace, lineinfile or
template is insufficient you can add 'warn: false' to this command task or set
'command_warnings=False' in ansible.cfg to get rid of this message.
changed: [localhost]

TASK [Delete ssh keys for ip] **************************************************
changed: [localhost]

TASK [Create ansible group for ipa server] *************************************
changed: [localhost]

TASK [Create data directory] ***************************************************
[WARNING]: Consider using the file module with state=directory rather than
running 'mkdir'.  If you need to use command because file is insufficient you
can add 'warn: false' to this command task or set 'command_warnings=False' in
ansible.cfg to get rid of this message.
changed: [localhost]

TASK [Clone template] **********************************************************
changed: [localhost]

TASK [Change rootvg size] ******************************************************
changed: [localhost]

TASK [Set max memory] **********************************************************
changed: [localhost]

TASK [Set more memory] *********************************************************
changed: [localhost]

TASK [Start machine] ***********************************************************
changed: [localhost]

PLAY [centos7] *****************************************************************

TASK [pause] *******************************************************************
Pausing for 35 seconds
(ctrl+C then 'C' = continue early, ctrl+C then 'A' = abort)
ok: [centos7]

TASK [Set global variables] ****************************************************
ok: [centos7]

TASK [Set ip] ******************************************************************
ok: [centos7]

TASK [Set FQDN] ****************************************************************
ok: [centos7]

TASK [Set REALM] ***************************************************************
ok: [centos7]

TASK [Set Kubernetes facts] ****************************************************
ok: [centos7]

TASK [Change hostname] *********************************************************
changed: [centos7]

TASK [Add hosts to hostname] ***************************************************
changed: [centos7]

TASK [Resize partition] ********************************************************
fatal: [centos7]: FAILED! => {"changed": true, "cmd": "printf 'd\\n2\\np\\nn\\np\\n2\\n\\n\\nt\\n2\\n8e\\nw' | fdisk /dev/vda", "delta": "0:00:00.019392", "end": "2021-02-26 12:18:48.976053", "msg": "non-zero return code", "rc": 1, "start": "2021-02-26 12:18:48.956661", "stderr": "", "stderr_lines": [], "stdout": "Welcome to fdisk (util-linux 2.23.2).\n\nChanges will remain in memory only, until you decide to write them.\nBe careful before using the write command.\n\n\nCommand (m for help): Partition number (1,2, default 2): Partition 2 is deleted\n\nCommand (m for help): \nDisk /dev/vda: 32.2 GB, 32212254720 bytes, 62914560 sectors\nUnits = sectors of 1 * 512 = 512 bytes\nSector size (logical/physical): 512 bytes / 512 bytes\nI/O size (minimum/optimal): 512 bytes / 512 bytes\nDisk label type: dos\nDisk identifier: 0x00013b86\n\n   Device Boot      Start         End      Blocks   Id  System\n/dev/vda1   *        2048     2099199     1048576   83  Linux\n\nCommand (m for help): Partition type:\n   p   primary (1 primary, 0 extended, 3 free)\n   e   extended\nSelect (default p): Partition number (2-4, default 2): First sector (2099200-62914559, default 2099200): Using default value 2099200\nLast sector, +sectors or +size{K,M,G} (2099200-62914559, default 62914559): Using default value 62914559\nPartition 2 of type Linux and of size 29 GiB is set\n\nCommand (m for help): Partition number (1,2, default 2): Hex code (type L to list all codes): Changed type of partition 'Linux' to 'Linux LVM'\n\nCommand (m for help): The partition table has been altered!\n\nCalling ioctl() to re-read partition table.\n\nWARNING: Re-reading the partition table failed with error 16: Device or resource busy.\nThe kernel still uses the old table. The new table will be used at\nthe next reboot or after you run partprobe(8) or kpartx(8)\nSyncing disks.", "stdout_lines": ["Welcome to fdisk (util-linux 2.23.2).", "", "Changes will remain in memory only, until you decide to write them.", "Be careful before using the write command.", "", "", "Command (m for help): Partition number (1,2, default 2): Partition 2 is deleted", "", "Command (m for help): ", "Disk /dev/vda: 32.2 GB, 32212254720 bytes, 62914560 sectors", "Units = sectors of 1 * 512 = 512 bytes", "Sector size (logical/physical): 512 bytes / 512 bytes", "I/O size (minimum/optimal): 512 bytes / 512 bytes", "Disk label type: dos", "Disk identifier: 0x00013b86", "", "   Device Boot      Start         End      Blocks   Id  System", "/dev/vda1   *        2048     2099199     1048576   83  Linux", "", "Command (m for help): Partition type:", "   p   primary (1 primary, 0 extended, 3 free)", "   e   extended", "Select (default p): Partition number (2-4, default 2): First sector (2099200-62914559, default 2099200): Using default value 2099200", "Last sector, +sectors or +size{K,M,G} (2099200-62914559, default 62914559): Using default value 62914559", "Partition 2 of type Linux and of size 29 GiB is set", "", "Command (m for help): Partition number (1,2, default 2): Hex code (type L to list all codes): Changed type of partition 'Linux' to 'Linux LVM'", "", "Command (m for help): The partition table has been altered!", "", "Calling ioctl() to re-read partition table.", "", "WARNING: Re-reading the partition table failed with error 16: Device or resource busy.", "The kernel still uses the old table. The new table will be used at", "the next reboot or after you run partprobe(8) or kpartx(8)", "Syncing disks."]}
...ignoring

TASK [Partprobe disks] *********************************************************
changed: [centos7]

TASK [PV resize] ***************************************************************
changed: [centos7]

TASK [Add an Ethernet connection with static IP configuration] *****************
changed: [centos7]

TASK [Install additional packages] *********************************************
[WARNING]: Consider using the yum module rather than running 'yum'.  If you
need to use command because yum is insufficient you can add 'warn: false' to
this command task or set 'command_warnings=False' in ansible.cfg to get rid of
this message.
changed: [centos7]

TASK [Enable make dir option for new users] ************************************
changed: [centos7]

TASK [Update sshd config - part 1] *********************************************
changed: [centos7]

TASK [Update sshd config - part 2] *********************************************
changed: [centos7]

TASK [Update ssh config - non strict host checking] ****************************
changed: [centos7]

TASK [Create nfshome dir] ******************************************************
changed: [centos7]

TASK [Set nfs home boolean] ****************************************************
changed: [centos7]

TASK [Prepare autofs master] ***************************************************
changed: [centos7]

TASK [Create auto.nfshome] *****************************************************
changed: [centos7]

TASK [Set timezone to Prague] **************************************************
changed: [centos7]

PLAY [localhost] ***************************************************************

TASK [Shutdown host] ***********************************************************
changed: [localhost]

TASK [pause] *******************************************************************
Pausing for 5 seconds
(ctrl+C then 'C' = continue early, ctrl+C then 'A' = abort)
ok: [localhost]

TASK [Destroy domain] **********************************************************
fatal: [localhost]: FAILED! => {"changed": true, "cmd": "virsh destroy node26.lab.local", "delta": "0:00:00.048196", "end": "2021-02-26 18:21:36.573014", "msg": "non-zero return code", "rc": 1, "start": "2021-02-26 18:21:36.524818", "stderr": "error: Failed to destroy domain node26.lab.local\nerror: Requested operation is not valid: domain is not running", "stderr_lines": ["error: Failed to destroy domain node26.lab.local", "error: Requested operation is not valid: domain is not running"], "stdout": "", "stdout_lines": []}
...ignoring

TASK [Change virbr interface] **************************************************
changed: [localhost]

TASK [Start domain] ************************************************************
changed: [localhost]

PLAY [newhost] *****************************************************************

TASK [pause] *******************************************************************
Pausing for 25 seconds
(ctrl+C then 'C' = continue early, ctrl+C then 'A' = abort)
ok: [10.1.16.26]

TASK [Set global variables] ****************************************************
ok: [10.1.16.26]

TASK [Set ip] ******************************************************************
ok: [10.1.16.26]

TASK [Set FQDN] ****************************************************************
ok: [10.1.16.26]

TASK [Set REALM] ***************************************************************
ok: [10.1.16.26]

TASK [Set Kubernetes facts] ****************************************************
ok: [10.1.16.26]

TASK [Join machine to IPA domain] **********************************************
changed: [10.1.16.26]

TASK [Get the krb5 ticket] *****************************************************
changed: [10.1.16.26]

TASK [Add nfs server to the ipa server] ****************************************
changed: [10.1.16.26]

TASK [Create nfs service for krb5 mount client] ********************************
changed: [10.1.16.26]

TASK [Enable and start nfs client] *********************************************
changed: [10.1.16.26]

TASK [Enable and start autofs] *************************************************
changed: [10.1.16.26]

PLAY RECAP *********************************************************************
10.1.16.26                 : ok=12   changed=6    unreachable=0    failed=0    skipped=0    rescued=0    ignored=0   
centos7                    : ok=22   changed=16   unreachable=0    failed=0    skipped=0    rescued=0    ignored=1   
localhost                  : ok=20   changed=14   unreachable=0    failed=0    skipped=0    rescued=0    ignored=1   

node27.lab.local
? (10.1.16.200) at 52:54:00:06:be:6d [ether] on virbr16
[WARNING]: Could not match supplied host pattern, ignoring: newhost

PLAY [localhost] ***************************************************************

TASK [Set global variables] ****************************************************
ok: [localhost]

TASK [Set ip] ******************************************************************
ok: [localhost]

TASK [Set FQDN] ****************************************************************
ok: [localhost]

TASK [Set REALM] ***************************************************************
ok: [localhost]

TASK [Set Kubernetes facts] ****************************************************
ok: [localhost]

TASK [Create ansible group for new hosts] **************************************
changed: [localhost]

TASK [Delete ssh keys for template] ********************************************
[WARNING]: Consider using the replace, lineinfile or template module rather
than running 'sed'.  If you need to use command because replace, lineinfile or
template is insufficient you can add 'warn: false' to this command task or set
'command_warnings=False' in ansible.cfg to get rid of this message.
changed: [localhost]

TASK [Delete ssh keys for ip] **************************************************
changed: [localhost]

TASK [Create ansible group for ipa server] *************************************
changed: [localhost]

TASK [Create data directory] ***************************************************
[WARNING]: Consider using the file module with state=directory rather than
running 'mkdir'.  If you need to use command because file is insufficient you
can add 'warn: false' to this command task or set 'command_warnings=False' in
ansible.cfg to get rid of this message.
changed: [localhost]

TASK [Clone template] **********************************************************
changed: [localhost]

TASK [Change rootvg size] ******************************************************
changed: [localhost]

TASK [Set max memory] **********************************************************
changed: [localhost]

TASK [Set more memory] *********************************************************
changed: [localhost]

TASK [Start machine] ***********************************************************
changed: [localhost]

PLAY [centos7] *****************************************************************

TASK [pause] *******************************************************************
Pausing for 35 seconds
(ctrl+C then 'C' = continue early, ctrl+C then 'A' = abort)
ok: [centos7]

TASK [Set global variables] ****************************************************
ok: [centos7]

TASK [Set ip] ******************************************************************
ok: [centos7]

TASK [Set FQDN] ****************************************************************
ok: [centos7]

TASK [Set REALM] ***************************************************************
ok: [centos7]

TASK [Set Kubernetes facts] ****************************************************
ok: [centos7]

TASK [Change hostname] *********************************************************
changed: [centos7]

TASK [Add hosts to hostname] ***************************************************
changed: [centos7]

TASK [Resize partition] ********************************************************
fatal: [centos7]: FAILED! => {"changed": true, "cmd": "printf 'd\\n2\\np\\nn\\np\\n2\\n\\n\\nt\\n2\\n8e\\nw' | fdisk /dev/vda", "delta": "0:00:00.023526", "end": "2021-02-26 12:24:44.383526", "msg": "non-zero return code", "rc": 1, "start": "2021-02-26 12:24:44.360000", "stderr": "", "stderr_lines": [], "stdout": "Welcome to fdisk (util-linux 2.23.2).\n\nChanges will remain in memory only, until you decide to write them.\nBe careful before using the write command.\n\n\nCommand (m for help): Partition number (1,2, default 2): Partition 2 is deleted\n\nCommand (m for help): \nDisk /dev/vda: 32.2 GB, 32212254720 bytes, 62914560 sectors\nUnits = sectors of 1 * 512 = 512 bytes\nSector size (logical/physical): 512 bytes / 512 bytes\nI/O size (minimum/optimal): 512 bytes / 512 bytes\nDisk label type: dos\nDisk identifier: 0x00013b86\n\n   Device Boot      Start         End      Blocks   Id  System\n/dev/vda1   *        2048     2099199     1048576   83  Linux\n\nCommand (m for help): Partition type:\n   p   primary (1 primary, 0 extended, 3 free)\n   e   extended\nSelect (default p): Partition number (2-4, default 2): First sector (2099200-62914559, default 2099200): Using default value 2099200\nLast sector, +sectors or +size{K,M,G} (2099200-62914559, default 62914559): Using default value 62914559\nPartition 2 of type Linux and of size 29 GiB is set\n\nCommand (m for help): Partition number (1,2, default 2): Hex code (type L to list all codes): Changed type of partition 'Linux' to 'Linux LVM'\n\nCommand (m for help): The partition table has been altered!\n\nCalling ioctl() to re-read partition table.\n\nWARNING: Re-reading the partition table failed with error 16: Device or resource busy.\nThe kernel still uses the old table. The new table will be used at\nthe next reboot or after you run partprobe(8) or kpartx(8)\nSyncing disks.", "stdout_lines": ["Welcome to fdisk (util-linux 2.23.2).", "", "Changes will remain in memory only, until you decide to write them.", "Be careful before using the write command.", "", "", "Command (m for help): Partition number (1,2, default 2): Partition 2 is deleted", "", "Command (m for help): ", "Disk /dev/vda: 32.2 GB, 32212254720 bytes, 62914560 sectors", "Units = sectors of 1 * 512 = 512 bytes", "Sector size (logical/physical): 512 bytes / 512 bytes", "I/O size (minimum/optimal): 512 bytes / 512 bytes", "Disk label type: dos", "Disk identifier: 0x00013b86", "", "   Device Boot      Start         End      Blocks   Id  System", "/dev/vda1   *        2048     2099199     1048576   83  Linux", "", "Command (m for help): Partition type:", "   p   primary (1 primary, 0 extended, 3 free)", "   e   extended", "Select (default p): Partition number (2-4, default 2): First sector (2099200-62914559, default 2099200): Using default value 2099200", "Last sector, +sectors or +size{K,M,G} (2099200-62914559, default 62914559): Using default value 62914559", "Partition 2 of type Linux and of size 29 GiB is set", "", "Command (m for help): Partition number (1,2, default 2): Hex code (type L to list all codes): Changed type of partition 'Linux' to 'Linux LVM'", "", "Command (m for help): The partition table has been altered!", "", "Calling ioctl() to re-read partition table.", "", "WARNING: Re-reading the partition table failed with error 16: Device or resource busy.", "The kernel still uses the old table. The new table will be used at", "the next reboot or after you run partprobe(8) or kpartx(8)", "Syncing disks."]}
...ignoring

TASK [Partprobe disks] *********************************************************
changed: [centos7]

TASK [PV resize] ***************************************************************
changed: [centos7]

TASK [Add an Ethernet connection with static IP configuration] *****************
changed: [centos7]

TASK [Install additional packages] *********************************************
[WARNING]: Consider using the yum module rather than running 'yum'.  If you
need to use command because yum is insufficient you can add 'warn: false' to
this command task or set 'command_warnings=False' in ansible.cfg to get rid of
this message.
changed: [centos7]

TASK [Enable make dir option for new users] ************************************
changed: [centos7]

TASK [Update sshd config - part 1] *********************************************
changed: [centos7]

TASK [Update sshd config - part 2] *********************************************
changed: [centos7]

TASK [Update ssh config - non strict host checking] ****************************
changed: [centos7]

TASK [Create nfshome dir] ******************************************************
changed: [centos7]

TASK [Set nfs home boolean] ****************************************************
changed: [centos7]

TASK [Prepare autofs master] ***************************************************
changed: [centos7]

TASK [Create auto.nfshome] *****************************************************
changed: [centos7]

TASK [Set timezone to Prague] **************************************************
changed: [centos7]

PLAY [localhost] ***************************************************************

TASK [Shutdown host] ***********************************************************
changed: [localhost]

TASK [pause] *******************************************************************
Pausing for 5 seconds
(ctrl+C then 'C' = continue early, ctrl+C then 'A' = abort)
ok: [localhost]

TASK [Destroy domain] **********************************************************
changed: [localhost]

TASK [Change virbr interface] **************************************************
changed: [localhost]

TASK [Start domain] ************************************************************
changed: [localhost]

PLAY [newhost] *****************************************************************

TASK [pause] *******************************************************************
Pausing for 25 seconds
(ctrl+C then 'C' = continue early, ctrl+C then 'A' = abort)
ok: [10.1.16.27]

TASK [Set global variables] ****************************************************
ok: [10.1.16.27]

TASK [Set ip] ******************************************************************
ok: [10.1.16.27]

TASK [Set FQDN] ****************************************************************
ok: [10.1.16.27]

TASK [Set REALM] ***************************************************************
ok: [10.1.16.27]

TASK [Set Kubernetes facts] ****************************************************
ok: [10.1.16.27]

TASK [Join machine to IPA domain] **********************************************
changed: [10.1.16.27]

TASK [Get the krb5 ticket] *****************************************************
changed: [10.1.16.27]

TASK [Add nfs server to the ipa server] ****************************************
changed: [10.1.16.27]

TASK [Create nfs service for krb5 mount client] ********************************
changed: [10.1.16.27]

TASK [Enable and start nfs client] *********************************************
changed: [10.1.16.27]

TASK [Enable and start autofs] *************************************************
changed: [10.1.16.27]

PLAY RECAP *********************************************************************
10.1.16.27                 : ok=12   changed=6    unreachable=0    failed=0    skipped=0    rescued=0    ignored=0   
centos7                    : ok=22   changed=16   unreachable=0    failed=0    skipped=0    rescued=0    ignored=1   
localhost                  : ok=20   changed=14   unreachable=0    failed=0    skipped=0    rescued=0    ignored=0   

node28.lab.local
? (10.1.16.200) at 52:54:00:bd:31:7a [ether] on virbr16
[WARNING]: Could not match supplied host pattern, ignoring: newhost

PLAY [localhost] ***************************************************************

TASK [Set global variables] ****************************************************
ok: [localhost]

TASK [Set ip] ******************************************************************
ok: [localhost]

TASK [Set FQDN] ****************************************************************
ok: [localhost]

TASK [Set REALM] ***************************************************************
ok: [localhost]

TASK [Set Kubernetes facts] ****************************************************
ok: [localhost]

TASK [Create ansible group for new hosts] **************************************
changed: [localhost]

TASK [Delete ssh keys for template] ********************************************
[WARNING]: Consider using the replace, lineinfile or template module rather
than running 'sed'.  If you need to use command because replace, lineinfile or
template is insufficient you can add 'warn: false' to this command task or set
'command_warnings=False' in ansible.cfg to get rid of this message.
changed: [localhost]

TASK [Delete ssh keys for ip] **************************************************
changed: [localhost]

TASK [Create ansible group for ipa server] *************************************
changed: [localhost]

TASK [Create data directory] ***************************************************
[WARNING]: Consider using the file module with state=directory rather than
running 'mkdir'.  If you need to use command because file is insufficient you
can add 'warn: false' to this command task or set 'command_warnings=False' in
ansible.cfg to get rid of this message.
changed: [localhost]

TASK [Clone template] **********************************************************
changed: [localhost]

TASK [Change rootvg size] ******************************************************
changed: [localhost]

TASK [Set max memory] **********************************************************
changed: [localhost]

TASK [Set more memory] *********************************************************
changed: [localhost]

TASK [Start machine] ***********************************************************
changed: [localhost]

PLAY [centos7] *****************************************************************

TASK [pause] *******************************************************************
Pausing for 35 seconds
(ctrl+C then 'C' = continue early, ctrl+C then 'A' = abort)
ok: [centos7]

TASK [Set global variables] ****************************************************
ok: [centos7]

TASK [Set ip] ******************************************************************
ok: [centos7]

TASK [Set FQDN] ****************************************************************
ok: [centos7]

TASK [Set REALM] ***************************************************************
ok: [centos7]

TASK [Set Kubernetes facts] ****************************************************
ok: [centos7]

TASK [Change hostname] *********************************************************
changed: [centos7]

TASK [Add hosts to hostname] ***************************************************
changed: [centos7]

TASK [Resize partition] ********************************************************
fatal: [centos7]: FAILED! => {"changed": true, "cmd": "printf 'd\\n2\\np\\nn\\np\\n2\\n\\n\\nt\\n2\\n8e\\nw' | fdisk /dev/vda", "delta": "0:00:00.026227", "end": "2021-02-26 12:30:47.559651", "msg": "non-zero return code", "rc": 1, "start": "2021-02-26 12:30:47.533424", "stderr": "", "stderr_lines": [], "stdout": "Welcome to fdisk (util-linux 2.23.2).\n\nChanges will remain in memory only, until you decide to write them.\nBe careful before using the write command.\n\n\nCommand (m for help): Partition number (1,2, default 2): Partition 2 is deleted\n\nCommand (m for help): \nDisk /dev/vda: 32.2 GB, 32212254720 bytes, 62914560 sectors\nUnits = sectors of 1 * 512 = 512 bytes\nSector size (logical/physical): 512 bytes / 512 bytes\nI/O size (minimum/optimal): 512 bytes / 512 bytes\nDisk label type: dos\nDisk identifier: 0x00013b86\n\n   Device Boot      Start         End      Blocks   Id  System\n/dev/vda1   *        2048     2099199     1048576   83  Linux\n\nCommand (m for help): Partition type:\n   p   primary (1 primary, 0 extended, 3 free)\n   e   extended\nSelect (default p): Partition number (2-4, default 2): First sector (2099200-62914559, default 2099200): Using default value 2099200\nLast sector, +sectors or +size{K,M,G} (2099200-62914559, default 62914559): Using default value 62914559\nPartition 2 of type Linux and of size 29 GiB is set\n\nCommand (m for help): Partition number (1,2, default 2): Hex code (type L to list all codes): Changed type of partition 'Linux' to 'Linux LVM'\n\nCommand (m for help): The partition table has been altered!\n\nCalling ioctl() to re-read partition table.\n\nWARNING: Re-reading the partition table failed with error 16: Device or resource busy.\nThe kernel still uses the old table. The new table will be used at\nthe next reboot or after you run partprobe(8) or kpartx(8)\nSyncing disks.", "stdout_lines": ["Welcome to fdisk (util-linux 2.23.2).", "", "Changes will remain in memory only, until you decide to write them.", "Be careful before using the write command.", "", "", "Command (m for help): Partition number (1,2, default 2): Partition 2 is deleted", "", "Command (m for help): ", "Disk /dev/vda: 32.2 GB, 32212254720 bytes, 62914560 sectors", "Units = sectors of 1 * 512 = 512 bytes", "Sector size (logical/physical): 512 bytes / 512 bytes", "I/O size (minimum/optimal): 512 bytes / 512 bytes", "Disk label type: dos", "Disk identifier: 0x00013b86", "", "   Device Boot      Start         End      Blocks   Id  System", "/dev/vda1   *        2048     2099199     1048576   83  Linux", "", "Command (m for help): Partition type:", "   p   primary (1 primary, 0 extended, 3 free)", "   e   extended", "Select (default p): Partition number (2-4, default 2): First sector (2099200-62914559, default 2099200): Using default value 2099200", "Last sector, +sectors or +size{K,M,G} (2099200-62914559, default 62914559): Using default value 62914559", "Partition 2 of type Linux and of size 29 GiB is set", "", "Command (m for help): Partition number (1,2, default 2): Hex code (type L to list all codes): Changed type of partition 'Linux' to 'Linux LVM'", "", "Command (m for help): The partition table has been altered!", "", "Calling ioctl() to re-read partition table.", "", "WARNING: Re-reading the partition table failed with error 16: Device or resource busy.", "The kernel still uses the old table. The new table will be used at", "the next reboot or after you run partprobe(8) or kpartx(8)", "Syncing disks."]}
...ignoring

TASK [Partprobe disks] *********************************************************
changed: [centos7]

TASK [PV resize] ***************************************************************
changed: [centos7]

TASK [Add an Ethernet connection with static IP configuration] *****************
changed: [centos7]

TASK [Install additional packages] *********************************************
[WARNING]: Consider using the yum module rather than running 'yum'.  If you
need to use command because yum is insufficient you can add 'warn: false' to
this command task or set 'command_warnings=False' in ansible.cfg to get rid of
this message.
changed: [centos7]

TASK [Enable make dir option for new users] ************************************
changed: [centos7]

TASK [Update sshd config - part 1] *********************************************
changed: [centos7]

TASK [Update sshd config - part 2] *********************************************
changed: [centos7]

TASK [Update ssh config - non strict host checking] ****************************
changed: [centos7]

TASK [Create nfshome dir] ******************************************************
changed: [centos7]

TASK [Set nfs home boolean] ****************************************************
changed: [centos7]

TASK [Prepare autofs master] ***************************************************
changed: [centos7]

TASK [Create auto.nfshome] *****************************************************
changed: [centos7]

TASK [Set timezone to Prague] **************************************************
changed: [centos7]

PLAY [localhost] ***************************************************************

TASK [Shutdown host] ***********************************************************
changed: [localhost]

TASK [pause] *******************************************************************
Pausing for 5 seconds
(ctrl+C then 'C' = continue early, ctrl+C then 'A' = abort)
ok: [localhost]

TASK [Destroy domain] **********************************************************
fatal: [localhost]: FAILED! => {"changed": true, "cmd": "virsh destroy node28.lab.local", "delta": "0:00:00.051838", "end": "2021-02-26 18:34:48.532247", "msg": "non-zero return code", "rc": 1, "start": "2021-02-26 18:34:48.480409", "stderr": "error: Failed to destroy domain node28.lab.local\nerror: Requested operation is not valid: domain is not running", "stderr_lines": ["error: Failed to destroy domain node28.lab.local", "error: Requested operation is not valid: domain is not running"], "stdout": "", "stdout_lines": []}
...ignoring

TASK [Change virbr interface] **************************************************
changed: [localhost]

TASK [Start domain] ************************************************************
changed: [localhost]

PLAY [newhost] *****************************************************************

TASK [pause] *******************************************************************
Pausing for 25 seconds
(ctrl+C then 'C' = continue early, ctrl+C then 'A' = abort)
ok: [10.1.16.28]

TASK [Set global variables] ****************************************************
ok: [10.1.16.28]

TASK [Set ip] ******************************************************************
ok: [10.1.16.28]

TASK [Set FQDN] ****************************************************************
ok: [10.1.16.28]

TASK [Set REALM] ***************************************************************
ok: [10.1.16.28]

TASK [Set Kubernetes facts] ****************************************************
ok: [10.1.16.28]

TASK [Join machine to IPA domain] **********************************************
changed: [10.1.16.28]

TASK [Get the krb5 ticket] *****************************************************
changed: [10.1.16.28]

TASK [Add nfs server to the ipa server] ****************************************
changed: [10.1.16.28]

TASK [Create nfs service for krb5 mount client] ********************************
changed: [10.1.16.28]

TASK [Enable and start nfs client] *********************************************
changed: [10.1.16.28]

TASK [Enable and start autofs] *************************************************
changed: [10.1.16.28]

PLAY RECAP *********************************************************************
10.1.16.28                 : ok=12   changed=6    unreachable=0    failed=0    skipped=0    rescued=0    ignored=0   
centos7                    : ok=22   changed=16   unreachable=0    failed=0    skipped=0    rescued=0    ignored=1   
localhost                  : ok=20   changed=14   unreachable=0    failed=0    skipped=0    rescued=0    ignored=1   

Creating nodes...
node23.lab.syscallx86.com
arp: in 9 entries no match found.
[WARNING]: Found both group and host with same name: localhost
[DEPRECATION WARNING]: "include" is deprecated, use include_tasks/import_tasks 
instead. See https://docs.ansible.com/ansible-
core/2.14/user_guide/playbooks_reuse_includes.html for details. This feature 
will be removed in version 2.16. Deprecation warnings can be disabled by 
setting deprecation_warnings=False in ansible.cfg.

PLAY [localhost] ***************************************************************

TASK [Set global variables] ****************************************************
ok: [localhost]

TASK [Set ip] ******************************************************************
ok: [localhost]

TASK [Set FQDN] ****************************************************************
ok: [localhost]

TASK [Set REALM] ***************************************************************
ok: [localhost]

TASK [Set Kubernetes facts] ****************************************************
ok: [localhost]

TASK [Create ansible group for new hosts] **************************************
changed: [localhost]

TASK [Delete ssh keys for template] ********************************************
changed: [localhost]

TASK [Delete ssh keys for ip] **************************************************
changed: [localhost]

TASK [Create ansible group for ipa server] *************************************
changed: [localhost]

TASK [Create data directory] ***************************************************
changed: [localhost]

TASK [Clone template] **********************************************************
changed: [localhost]

TASK [Change rootvg size] ******************************************************
changed: [localhost]

TASK [Set max memory] **********************************************************
changed: [localhost]

TASK [Set more memory] *********************************************************
changed: [localhost]

TASK [Start machine] ***********************************************************
changed: [localhost]

PLAY [basevm] ******************************************************************

TASK [pause] *******************************************************************
Pausing for 35 seconds
(ctrl+C then 'C' = continue early, ctrl+C then 'A' = abort)
ok: [basevm]

TASK [Set global variables] ****************************************************
ok: [basevm]

TASK [Set ip] ******************************************************************
ok: [basevm]

TASK [Set FQDN] ****************************************************************
ok: [basevm]

TASK [Set REALM] ***************************************************************
ok: [basevm]

TASK [Set Kubernetes facts] ****************************************************
ok: [basevm]

TASK [Change hostname] *********************************************************
changed: [basevm]

TASK [Add hosts to hostname] ***************************************************
changed: [basevm]

TASK [Resize partition] ********************************************************
changed: [basevm]

TASK [Partprobe disks] *********************************************************
changed: [basevm]

TASK [PV resize] ***************************************************************
changed: [basevm]

TASK [Add an Ethernet connection with static IP configuration] *****************
changed: [basevm]

TASK [Install additional packages] *********************************************
changed: [basevm]

TASK [Update sshd config - part 1] *********************************************
changed: [basevm]

TASK [Update sshd config - part 2] *********************************************
changed: [basevm]

TASK [Update ssh config - non strict host checking] ****************************
changed: [basevm]

TASK [Update ssh config - GSSAPI] **********************************************
changed: [basevm]

TASK [Create nfshome dir] ******************************************************
changed: [basevm]

TASK [Set nfs home boolean] ****************************************************
changed: [basevm]

TASK [Prepare autofs master] ***************************************************
changed: [basevm]

TASK [Create auto.nfshome] *****************************************************
changed: [basevm]

TASK [Set timezone to Prague] **************************************************
changed: [basevm]

PLAY [localhost] ***************************************************************

TASK [Shutdown host] ***********************************************************
changed: [localhost]

TASK [pause] *******************************************************************
Pausing for 5 seconds
(ctrl+C then 'C' = continue early, ctrl+C then 'A' = abort)
ok: [localhost]

TASK [Destroy domain] **********************************************************
fatal: [localhost]: FAILED! => {"changed": true, "cmd": "virsh destroy node23.lab.syscallx86.com", "delta": "0:00:00.099937", "end": "2024-07-29 16:30:14.200228", "msg": "non-zero return code", "rc": 1, "start": "2024-07-29 16:30:14.100291", "stderr": "error: Failed to destroy domain 'node23.lab.syscallx86.com'\nerror: Requested operation is not valid: domain is not running", "stderr_lines": ["error: Failed to destroy domain 'node23.lab.syscallx86.com'", "error: Requested operation is not valid: domain is not running"], "stdout": "", "stdout_lines": []}
...ignoring

TASK [Change network configuration] ********************************************
changed: [localhost]

TASK [Start domain] ************************************************************
changed: [localhost]

PLAY [newhost] *****************************************************************

TASK [pause] *******************************************************************
Pausing for 25 seconds
(ctrl+C then 'C' = continue early, ctrl+C then 'A' = abort)
ok: [10.1.4.23]

TASK [Set global variables] ****************************************************
ok: [10.1.4.23]

TASK [Set ip] ******************************************************************
ok: [10.1.4.23]

TASK [Set FQDN] ****************************************************************
ok: [10.1.4.23]

TASK [Set REALM] ***************************************************************
ok: [10.1.4.23]

TASK [Set Kubernetes facts] ****************************************************
ok: [10.1.4.23]

TASK [Join machine to IPA domain] **********************************************
changed: [10.1.4.23]

TASK [Get the krb5 ticket] *****************************************************
changed: [10.1.4.23]

TASK [Add nfs server to the ipa server] ****************************************
changed: [10.1.4.23]

TASK [Create nfs service for krb5 mount client] ********************************
changed: [10.1.4.23]

TASK [Enable and start nfs client] *********************************************
changed: [10.1.4.23]

TASK [Enable and start autofs] *************************************************
changed: [10.1.4.23]

PLAY RECAP *********************************************************************
10.1.4.23                  : ok=12   changed=6    unreachable=0    failed=0    skipped=0    rescued=0    ignored=0   
basevm                     : ok=22   changed=16   unreachable=0    failed=0    skipped=0    rescued=0    ignored=0   
localhost                  : ok=20   changed=14   unreachable=0    failed=0    skipped=0    rescued=0    ignored=1   

[WARNING]: Found both group and host with same name: localhost
[DEPRECATION WARNING]: "include" is deprecated, use include_tasks/import_tasks 
instead. See https://docs.ansible.com/ansible-
core/2.14/user_guide/playbooks_reuse_includes.html for details. This feature 
will be removed in version 2.16. Deprecation warnings can be disabled by 
setting deprecation_warnings=False in ansible.cfg.

PLAY [localhost] ***************************************************************

TASK [Set global variables] ****************************************************
ok: [localhost]

TASK [Set ip] ******************************************************************
ok: [localhost]

TASK [Set FQDN] ****************************************************************
ok: [localhost]

TASK [Set REALM] ***************************************************************
ok: [localhost]

TASK [Set Kubernetes facts] ****************************************************
ok: [localhost]

TASK [Create snapshot for the host] ********************************************
changed: [localhost]

TASK [Create ansible group for new hosts] **************************************
changed: [localhost]

PLAY [newhost] *****************************************************************

TASK [Set global variables] ****************************************************
ok: [10.1.4.23]

TASK [Set ip] ******************************************************************
ok: [10.1.4.23]

TASK [Set FQDN] ****************************************************************
ok: [10.1.4.23]

TASK [Set REALM] ***************************************************************
ok: [10.1.4.23]

TASK [Set Kubernetes facts] ****************************************************
ok: [10.1.4.23]

TASK [Disable SElinux] *********************************************************
changed: [10.1.4.23]

TASK [Make /etc/kubernetes directory and change the selinux context] ***********
changed: [10.1.4.23]

TASK [Make /var/lib/etcd and change the selinux context] ***********************
changed: [10.1.4.23]

TASK [Restore contexts] ********************************************************
changed: [10.1.4.23]

TASK [Disable swap] ************************************************************
changed: [10.1.4.23]

TASK [Disable firewalld] *******************************************************
changed: [10.1.4.23]

TASK [Install ovs] *************************************************************
changed: [10.1.4.23]

TASK [Copy kubernetes repo definition to yum dir] ******************************
changed: [10.1.4.23]

TASK [Copy crio repo definition to yum dir] ************************************
changed: [10.1.4.23]

TASK [Install kubeadm, crio and wget] ******************************************
changed: [10.1.4.23]

TASK [Enable crio] *************************************************************
changed: [10.1.4.23]

TASK [Copy ssh keys for root - HACK - must be changed!] ************************
changed: [10.1.4.23]

TASK [Copy ssh keys for root - HACK - must be changed! - changing perm] ********
changed: [10.1.4.23]

TASK [Get token file] **********************************************************
changed: [10.1.4.23]

TASK [Get token] ***************************************************************
changed: [10.1.4.23]

TASK [Get CA token] ************************************************************
changed: [10.1.4.23]

TASK [Join node to kubernetes cluster] *****************************************
changed: [10.1.4.23]

TASK [Enable kubelet] **********************************************************
changed: [10.1.4.23]

TASK [Create .kube directory] **************************************************
changed: [10.1.4.23]

TASK [Copy cfg to .kube dir] ***************************************************
changed: [10.1.4.23]

TASK [Change ownership to kube directory] **************************************
changed: [10.1.4.23]

TASK [Label node as a worker] **************************************************
changed: [10.1.4.23]

PLAY RECAP *********************************************************************
10.1.4.23                  : ok=27   changed=22   unreachable=0    failed=0    skipped=0    rescued=0    ignored=0   
localhost                  : ok=7    changed=2    unreachable=0    failed=0    skipped=0    rescued=0    ignored=0   

node24.lab.syscallx86.com
arp: in 10 entries no match found.
[WARNING]: Found both group and host with same name: localhost
[DEPRECATION WARNING]: "include" is deprecated, use include_tasks/import_tasks 
instead. See https://docs.ansible.com/ansible-
core/2.14/user_guide/playbooks_reuse_includes.html for details. This feature 
will be removed in version 2.16. Deprecation warnings can be disabled by 
setting deprecation_warnings=False in ansible.cfg.

PLAY [localhost] ***************************************************************

TASK [Set global variables] ****************************************************
ok: [localhost]

TASK [Set ip] ******************************************************************
ok: [localhost]

TASK [Set FQDN] ****************************************************************
ok: [localhost]

TASK [Set REALM] ***************************************************************
ok: [localhost]

TASK [Set Kubernetes facts] ****************************************************
ok: [localhost]

TASK [Create ansible group for new hosts] **************************************
changed: [localhost]

TASK [Delete ssh keys for template] ********************************************
changed: [localhost]

TASK [Delete ssh keys for ip] **************************************************
changed: [localhost]

TASK [Create ansible group for ipa server] *************************************
changed: [localhost]

TASK [Create data directory] ***************************************************
changed: [localhost]

TASK [Clone template] **********************************************************
changed: [localhost]

TASK [Change rootvg size] ******************************************************
changed: [localhost]

TASK [Set max memory] **********************************************************
changed: [localhost]

TASK [Set more memory] *********************************************************
changed: [localhost]

TASK [Start machine] ***********************************************************
changed: [localhost]

PLAY [basevm] ******************************************************************

TASK [pause] *******************************************************************
Pausing for 35 seconds
(ctrl+C then 'C' = continue early, ctrl+C then 'A' = abort)
ok: [basevm]

TASK [Set global variables] ****************************************************
ok: [basevm]

TASK [Set ip] ******************************************************************
ok: [basevm]

TASK [Set FQDN] ****************************************************************
ok: [basevm]

TASK [Set REALM] ***************************************************************
ok: [basevm]

TASK [Set Kubernetes facts] ****************************************************
ok: [basevm]

TASK [Change hostname] *********************************************************
changed: [basevm]

TASK [Add hosts to hostname] ***************************************************
changed: [basevm]

TASK [Resize partition] ********************************************************
changed: [basevm]

TASK [Partprobe disks] *********************************************************
changed: [basevm]

TASK [PV resize] ***************************************************************
changed: [basevm]

TASK [Add an Ethernet connection with static IP configuration] *****************
changed: [basevm]

TASK [Install additional packages] *********************************************
changed: [basevm]

TASK [Update sshd config - part 1] *********************************************
changed: [basevm]

TASK [Update sshd config - part 2] *********************************************
changed: [basevm]

TASK [Update ssh config - non strict host checking] ****************************
changed: [basevm]

TASK [Update ssh config - GSSAPI] **********************************************
changed: [basevm]

TASK [Create nfshome dir] ******************************************************
changed: [basevm]

TASK [Set nfs home boolean] ****************************************************
changed: [basevm]

TASK [Prepare autofs master] ***************************************************
changed: [basevm]

TASK [Create auto.nfshome] *****************************************************
changed: [basevm]

TASK [Set timezone to Prague] **************************************************
changed: [basevm]

PLAY [localhost] ***************************************************************

TASK [Shutdown host] ***********************************************************
changed: [localhost]

TASK [pause] *******************************************************************
Pausing for 5 seconds
(ctrl+C then 'C' = continue early, ctrl+C then 'A' = abort)
ok: [localhost]

TASK [Destroy domain] **********************************************************
fatal: [localhost]: FAILED! => {"changed": true, "cmd": "virsh destroy node24.lab.syscallx86.com", "delta": "0:00:00.093630", "end": "2024-07-29 16:36:06.096523", "msg": "non-zero return code", "rc": 1, "start": "2024-07-29 16:36:06.002893", "stderr": "error: Failed to destroy domain 'node24.lab.syscallx86.com'\nerror: Requested operation is not valid: domain is not running", "stderr_lines": ["error: Failed to destroy domain 'node24.lab.syscallx86.com'", "error: Requested operation is not valid: domain is not running"], "stdout": "", "stdout_lines": []}
...ignoring

TASK [Change network configuration] ********************************************
changed: [localhost]

TASK [Start domain] ************************************************************
changed: [localhost]

PLAY [newhost] *****************************************************************

TASK [pause] *******************************************************************
Pausing for 25 seconds
(ctrl+C then 'C' = continue early, ctrl+C then 'A' = abort)
ok: [10.1.4.24]

TASK [Set global variables] ****************************************************
ok: [10.1.4.24]

TASK [Set ip] ******************************************************************
ok: [10.1.4.24]

TASK [Set FQDN] ****************************************************************
ok: [10.1.4.24]

TASK [Set REALM] ***************************************************************
ok: [10.1.4.24]

TASK [Set Kubernetes facts] ****************************************************
ok: [10.1.4.24]

TASK [Join machine to IPA domain] **********************************************
changed: [10.1.4.24]

TASK [Get the krb5 ticket] *****************************************************
changed: [10.1.4.24]

TASK [Add nfs server to the ipa server] ****************************************
changed: [10.1.4.24]

TASK [Create nfs service for krb5 mount client] ********************************
changed: [10.1.4.24]

TASK [Enable and start nfs client] *********************************************
changed: [10.1.4.24]

TASK [Enable and start autofs] *************************************************
changed: [10.1.4.24]

PLAY RECAP *********************************************************************
10.1.4.24                  : ok=12   changed=6    unreachable=0    failed=0    skipped=0    rescued=0    ignored=0   
basevm                     : ok=22   changed=16   unreachable=0    failed=0    skipped=0    rescued=0    ignored=0   
localhost                  : ok=20   changed=14   unreachable=0    failed=0    skipped=0    rescued=0    ignored=1   

[WARNING]: Found both group and host with same name: localhost
[DEPRECATION WARNING]: "include" is deprecated, use include_tasks/import_tasks 
instead. See https://docs.ansible.com/ansible-
core/2.14/user_guide/playbooks_reuse_includes.html for details. This feature 
will be removed in version 2.16. Deprecation warnings can be disabled by 
setting deprecation_warnings=False in ansible.cfg.

PLAY [localhost] ***************************************************************

TASK [Set global variables] ****************************************************
ok: [localhost]

TASK [Set ip] ******************************************************************
ok: [localhost]

TASK [Set FQDN] ****************************************************************
ok: [localhost]

TASK [Set REALM] ***************************************************************
ok: [localhost]

TASK [Set Kubernetes facts] ****************************************************
ok: [localhost]

TASK [Create snapshot for the host] ********************************************
changed: [localhost]

TASK [Create ansible group for new hosts] **************************************
changed: [localhost]

PLAY [newhost] *****************************************************************

TASK [Set global variables] ****************************************************
ok: [10.1.4.24]

TASK [Set ip] ******************************************************************
ok: [10.1.4.24]

TASK [Set FQDN] ****************************************************************
ok: [10.1.4.24]

TASK [Set REALM] ***************************************************************
ok: [10.1.4.24]

TASK [Set Kubernetes facts] ****************************************************
ok: [10.1.4.24]

TASK [Disable SElinux] *********************************************************
changed: [10.1.4.24]

TASK [Make /etc/kubernetes directory and change the selinux context] ***********
changed: [10.1.4.24]

TASK [Make /var/lib/etcd and change the selinux context] ***********************
changed: [10.1.4.24]

TASK [Restore contexts] ********************************************************
changed: [10.1.4.24]

TASK [Disable swap] ************************************************************
changed: [10.1.4.24]

TASK [Disable firewalld] *******************************************************
changed: [10.1.4.24]

TASK [Install ovs] *************************************************************
changed: [10.1.4.24]

TASK [Copy kubernetes repo definition to yum dir] ******************************
changed: [10.1.4.24]

TASK [Copy crio repo definition to yum dir] ************************************
changed: [10.1.4.24]

TASK [Install kubeadm, crio and wget] ******************************************
changed: [10.1.4.24]

TASK [Enable crio] *************************************************************
changed: [10.1.4.24]

TASK [Copy ssh keys for root - HACK - must be changed!] ************************
changed: [10.1.4.24]

TASK [Copy ssh keys for root - HACK - must be changed! - changing perm] ********
changed: [10.1.4.24]

TASK [Get token file] **********************************************************
changed: [10.1.4.24]

TASK [Get token] ***************************************************************
changed: [10.1.4.24]

TASK [Get CA token] ************************************************************
changed: [10.1.4.24]

TASK [Join node to kubernetes cluster] *****************************************
changed: [10.1.4.24]

TASK [Enable kubelet] **********************************************************
changed: [10.1.4.24]

TASK [Create .kube directory] **************************************************
changed: [10.1.4.24]

TASK [Copy cfg to .kube dir] ***************************************************
changed: [10.1.4.24]

TASK [Change ownership to kube directory] **************************************
changed: [10.1.4.24]

TASK [Label node as a worker] **************************************************
changed: [10.1.4.24]

PLAY RECAP *********************************************************************
10.1.4.24                  : ok=27   changed=22   unreachable=0    failed=0    skipped=0    rescued=0    ignored=0   
localhost                  : ok=7    changed=2    unreachable=0    failed=0    skipped=0    rescued=0    ignored=0   

